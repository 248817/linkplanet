var headlink="headdefault.png";var cardlink="card01.png";var transparentlink="transparent.png";var eggLink="planetresource/egg/egg_00.png";var bgLink="planetresource/bg/bg_00.png";var detailLink="planetresource/item/item_00.png";var eggpPosX=578;var eggpPosY=44;var bgState=0;var eggState=0;var detailState=0;var LASTBGSET=31;var LASTEGGSET=27;var LASTDETAILSET=27;var title="";var name="";var state="";var tall="";var color="";function draw(){var headImage=new Image();var backgroundImage=new Image();backgroundImage.src="black_background.png";headImage.src=headlink;var cardImage=new Image();cardImage.src="card01.png";var bgImage=new Image();bgImage.src=bgLink;var detailImage=new Image();detailImage.src=detailLink;var eggImage=new Image();eggImage.src=eggLink;var img=new Image();img.addEventListener('load',function(){var ctx=document.getElementById('myCanvas').getContext("2d");ctx.drawImage(img,12,44,162,194);if(headImage.width<150||headImage.height<150){ctx.drawImage(backgroundImage,12,12,740,206);ctx.drawImage(headImage,(75-(headImage.width)/2)+12,75-(headImage.height/2)+44)}else{ctx.drawImage(headImage,(75-(headImage.width)/2)+12,75-(headImage.height/2)+44)}ctx.drawImage(bgImage,eggpPosX,eggpPosY);ctx.drawImage(eggImage,eggpPosX,eggpPosY);ctx.drawImage(detailImage,eggpPosX,eggpPosY);ctx.drawImage(cardImage,0,0,740,206);ctx.globalCompositeOperation="source-over";ctx.font='bold 24px PFStardust';ctx.textAlign='left';ctx.fillStyle="rgba(171,76,0,1)";ctx.textBaseline='hanging';ctx.fillText(title,43,13);ctx.font='24px PFStardust';ctx.textAlign='center';ctx.fillStyle="rgba(0,0,0,1)";ctx.textBaseline='middle';ctx.fillText(state,376,70);ctx.font='24px PFStardust';ctx.textAlign='left';ctx.fillStyle="rgba(255,255,255,1)";ctx.textBaseline='middle';ctx.fillText(name,238,127);ctx.font='24px PFStardust';ctx.textAlign='right';ctx.fillStyle="rgba(255,255,255,1)";ctx.textBaseline='middle';ctx.fillText(tall,298,174);ctx.font='24px PFStardust';ctx.textAlign='right';ctx.fillStyle="rgba(255,255,255,1)";ctx.textBaseline='middle';ctx.fillText(color,550,174)},false);img.src=transparentlink}function textload(){title=document.getElementById('planetTitle').value;name=document.getElementById('characterName').value;state=document.getElementById('stateMessage').value;tall=document.getElementById('tall').value+" cm";color=document.getElementById('favoritColor').value;draw()}function fileInfo(f){var file=f.files;if(file[0].size>1024*1024){alert('파일 크기가 너무 큽니다. 1MB아래로 줄여주세요...부디..제발..');return}else if(file[0].type.indexOf('image')<0){alert('이미지 파일만 선택해주세요..제발..제발요..');return}var reader=new FileReader();reader.onload=function(rst){headlink=rst.target.result;draw()};reader.readAsDataURL(file[0])}function addEgg(number){var img=new Image();var stringnum="";if(number>=10){stringnum=number.toString()}else{stringnum="0"+number.toString()}eggLink="planetresource/egg/egg_"+stringnum+".png";var img=new Image();img.src=eggLink;img.addEventListener('load',function(){draw()})}function addBg(number){var img=new Image();var stringnum="";if(number>=10){stringnum=number.toString()}else{stringnum="0"+number.toString()}bgLink="planetresource/bg/bg_"+stringnum+".png";var img=new Image();img.src=bgLink;img.addEventListener('load',function(){draw()})}function addDetail(number){var img=new Image();var stringnum="";if(number>=10){stringnum=number.toString()}else{stringnum="0"+number.toString()}detailLink="planetresource/item/item_"+stringnum+".png";var img=new Image();img.src=detailLink;img.addEventListener('load',function(){draw()})}function bgprev(){bgState--;if(bgState<0){bgState=LASTBGSET}var str="배경"+(bgState+1).toString();document.getElementById("bgtxt").innerHTML=str;addBg(bgState)}function bgnext(){bgState++;if(bgState>LASTBGSET){bgState=0}var str="배경"+(bgState+1).toString();document.getElementById("bgtxt").innerHTML=str;addBg(bgState)}function eggprev(){eggState--;if(eggState<0){eggState=LASTEGGSET}var str="달걀"+(eggState+1).toString();document.getElementById("eggtxt").innerHTML=str;addEgg(eggState)}function eggnext(){eggState++;if(eggState>LASTEGGSET){eggState=0}var str="달걀"+(eggState+1).toString();document.getElementById("eggtxt").innerHTML=str;addEgg(eggState)}function detailprev(){detailState--;if(detailState<0){detailState=LASTDETAILSET}var str="소품"+(detailState+1).toString();document.getElementById("dttxt").innerHTML=str;addDetail(detailState)}function detailnext(){detailState++;if(detailState>LASTDETAILSET){detailState=0}var str="소품"+(detailState+1).toString();document.getElementById("dttxt").innerHTML=str;addDetail(detailState)}function win_load(){var filter="win16|win32|win64|mac";if(navigator.platform){if(filter.indexOf(navigator.platform.toLowerCase())<0){console.log("mobile");document.getElementById("pc").style.display='none';document.getElementById("mobile").style.display='block'}else{document.getElementById("pc").style.display='block';document.getElementById("mobile").style.display='none';console.log("pc")}}else{consol.log("????")}}window.onload=win_load;